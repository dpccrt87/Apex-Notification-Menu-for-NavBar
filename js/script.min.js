var notificationMenu=function(){"use strict";return{initialize:function(a,o,e,t){function s(a){if(o)apex.server.plugin(o,{pageItems:t},{success:a,error:function(a){l.empty(),console.log(a.responseText),l.append("<span>Error occured please check console for more information</span>")},dataType:"json"});else try{g(dataJSON)}catch(e){console.log("need data json"),console.log(e)}}function d(){var a=$("<li></li>");a.addClass("t-NavigationBar-item");var o=$("<div></div>");return a.append(o),$(".t-NavigationBar").prepend(a),o}function g(o){var e=$("<div></div>");e.addClass("toggleNotifications"),e.attr("id",a+"_toggleNote"),e.attr("toggled","true");var t="#"+a+"_ul";e.click(function(){var a="false"==e.attr("toggled")?"true":"false";e.attr("toggled",a),$(t).fadeToggle("fast")}),$(document).on("touchstart click",function(a){!e.is(a.target)&&0===e.has(a.target).length&&!$(a.target).parents(t).length>0&&"false"==e.attr("toggled")&&(e.attr("toggled",!0),$(t).fadeToggle("fast"))});var r=$("<div></div>");r.addClass("count"),e.append(r);var i=$("<div></div>");i.addClass("num"),i.css("background",n.counterBackgroundColor),i.css("color",n.counterFontColor),i.attr("id",a+"_numdiv"),i.html(o.row.length),r.append(i);var s=$("<label></label>");s.addClass("show"),s.css("background",n.mainIconBackgroundColor),s.attr("for",a+"_navtoggle");var d=$("<i></i>");d.addClass("fa"),d.addClass(n.mainIcon),d.css("color",n.mainIconColor),n.mainIconBlinking&&d.addClass("fa-blink"),s.append(d),e.append(s),l.append(e),c(o)}function c(o){var e="#"+a+"_toggleNote";if($(e).hide(),o.row){var t="#"+a+"_numdiv",r="#"+a+"_ul";o.row.length>0?($(e).show(),$(t).html(o.row.length),$(r).remove(),f($(e),o)):($(r).remove(),$(t).html("0"))}}function f(o,e){var t=$("<ul></ul>");t.attr("id",a+"_ul"),t.addClass("notifications"),t.addClass("notificationstoggle");var r="#"+a+"_toggleNote";if("false"==$(r).attr("toggled")&&t.toggle(),e.row)for(var l=0;l<e.row.length;l++){var i=$("<a></a>");e.row[l].NOTE_LINK&&(i.attr("href",e.row[l].NOTE_LINK),n.linkTargetBlank&&i.attr("target","_blank"),i.on("touchstart click",function(a){"false"==o.attr("toggled")&&(o.attr("toggled",!0),$(t).fadeToggle("fast"))}));var s=$("<li></li>");s.addClass("note"),e.row[l].NOTE_COLOR&&s.css("box-shadow","-5px 0 0 0 "+e.row[l].NOTE_COLOR);var d=$("<div></div>");d.addClass("note-header");var g=$("<i></i>");g.addClass("fa"),e.row[l].NOTE_ICON&&g.addClass(e.row[l].NOTE_ICON),e.row[l].NOTE_ICON_COLOR&&g.css("color",e.row[l].NOTE_ICON_COLOR),g.addClass("fa-lg"),d.append(g),e.row[l].NOTE_HEADER&&d.append(e.row[l].NOTE_HEADER),s.append(d);var c=$("<span></span>");c.addClass("note-info"),e.row[l].NOTE_TEXT&&c.html(e.row[l].NOTE_TEXT),s.append(c),i.append(s),t.append(i)}$("body").append(t)}var r={refresh:0,mainIcon:"fa-bell",mainIconColor:"white",mainIconBackgroundColor:"rgba(70,70,70,0.9)",mainIconBlinking:!1,counterBackgroundColor:"rgb(232, 55, 55 )",counterFontColor:"white",linkTargetBlank:!0},n={},l=d();if("string"==typeof e)try{n=JSON.parse(e)}catch(i){console.log("Error while try to parse udConfigJSON. Please check your Config JSON. Standard Config will be used."),console.log(i),console.log(e),n={}}else n=e;try{n=$.extend(!0,r,n)}catch(i){console.log("Error while try to merge udConfigJSON into Standard JSON if any attribute is missing. Please check your Config JSON. Standard Config will be used."),console.log(i),n=r,console.log(n)}s(g),n.refresh>0&&setInterval(function(){0==l.children("span").length&&(o?s(c):c(dataJSON))},1e3*n.refresh)}}}();