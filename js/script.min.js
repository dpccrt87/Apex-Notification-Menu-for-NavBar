var notificationMenu=function(){"use strict";var o={version:"1.0",escapeHTML:function(o){if(o&&o.length>0)try{return apex.util.escapeHTML(o.toString())}catch(a){return o.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")}},jsonSaveExtend:function(o,a){var e={};if("string"==typeof a)try{a=JSON.parse(a)}catch(o){console.log("Error while try to parse udConfigJSON. Please check your Config JSON. Standard Config will be used."),console.log(o),console.log(a)}else e=a;try{e=$.extend(!0,o,a)}catch(a){console.log("Error while try to merge udConfigJSON into Standard JSON if any attribute is missing. Please check your Config JSON. Standard Config will be used."),console.log(a),e=o,console.log(e)}return e}};return{initialize:function(a,e,r,n,t){function l(o){if(e)apex.server.plugin(e,{pageItems:n},{success:o,error:function(o){d.empty(),console.log(o.responseText),d.append("<span>Error occured please check console for more information</span>")},dataType:"json"});else try{s(dataJSON)}catch(o){console.log("need data json"),console.log(o)}}function s(e){!1!==t&&(c.counterBackgroundColor=o.escapeHTML(c.counterBackgroundColor),c.counterFontColor=o.escapeHTML(c.counterFontColor),c.mainIcon=o.escapeHTML(c.mainIcon),c.mainIconBackgroundColor=o.escapeHTML(c.mainIconBackgroundColor),c.mainIconColor=o.escapeHTML(c.mainIconColor));var r=$("<div></div>");r.addClass("toggleNotifications"),r.attr("id",a+"_toggleNote"),r.attr("toggled","true");var n="#"+a+"_ul";r.click(function(){var o="false"==r.attr("toggled")?"true":"false";r.attr("toggled",o),$(n).fadeToggle("fast")}),$(document).on("touchstart click",function(o){!r.is(o.target)&&0===r.has(o.target).length&&!$(o.target).parents(n).length>0&&"false"==r.attr("toggled")&&(r.attr("toggled",!0),$(n).fadeToggle("fast"))});var l=$("<div></div>");l.addClass("count"),r.append(l);var s=$("<div></div>");s.addClass("num"),s.css("background",c.counterBackgroundColor),s.css("color",c.counterFontColor),s.attr("id",a+"_numdiv"),s.html(e.row.length),l.append(s);var g=$("<label></label>");g.addClass("show"),g.css("background",c.mainIconBackgroundColor),g.attr("for",a+"_navtoggle");var p=$("<i></i>");p.addClass("fa"),p.addClass(c.mainIcon),p.css("color",c.mainIconColor),c.mainIconBlinking&&p.addClass("fa-blink"),g.append(p),r.append(g),d.append(r),i(e)}function i(e){var r="#"+a+"_toggleNote";if($(r).hide(),e.row){var n="#"+a+"_numdiv",l="#"+a+"_ul";e.row.length>0?($(r).show(),$(n).html(e.row.length),$(l).remove(),function(e,r){var n=$("<ul></ul>");n.attr("id",a+"_ul"),n.addClass("notifications"),n.addClass("notificationstoggle");var l="#"+a+"_toggleNote";"false"==$(l).attr("toggled")&&n.toggle();if(r.row)for(var s=0;s<r.row.length;s++){!1!==t&&(r.row[s].NOTE_LINK&&(r.row[s].NOTE_LINK=o.escapeHTML(r.row[s].NOTE_LINK)),r.row[s].NOTE_HEADER&&(r.row[s].NOTE_HEADER=o.escapeHTML(r.row[s].NOTE_HEADER)),r.row[s].NOTE_ICON&&(r.row[s].NOTE_ICON=o.escapeHTML(r.row[s].NOTE_ICON)),r.row[s].NOTE_ICON_COLOR&&(r.row[s].NOTE_ICON_COLOR=o.escapeHTML(r.row[s].NOTE_ICON_COLOR)),r.row[s].NOTE_TEXT&&(r.row[s].NOTE_TEXT=o.escapeHTML(r.row[s].NOTE_TEXT)));var i=$("<a></a>");r.row[s].NOTE_LINK&&(i.attr("href",r.row[s].NOTE_LINK),c.linkTargetBlank&&i.attr("target","_blank"),i.on("touchstart click",function(o){"false"==e.attr("toggled")&&(e.attr("toggled",!0),$(n).fadeToggle("fast"))}));var d=$("<li></li>");d.addClass("note"),r.row[s].NOTE_COLOR&&d.css("box-shadow","-5px 0 0 0 "+r.row[s].NOTE_COLOR);var g=$("<div></div>");g.addClass("note-header");var p=$("<i></i>");p.addClass("fa"),r.row[s].NOTE_ICON&&p.addClass(r.row[s].NOTE_ICON),r.row[s].NOTE_ICON_COLOR&&p.css("color",r.row[s].NOTE_ICON_COLOR),p.addClass("fa-lg"),g.append(p),r.row[s].NOTE_HEADER&&g.append(r.row[s].NOTE_HEADER),d.append(g);var u=$("<span></span>");u.addClass("note-info"),r.row[s].NOTE_TEXT&&u.html(r.row[s].NOTE_TEXT),d.append(u),i.append(d),n.append(i)}$("body").append(n)}($(r),e)):($(l).remove(),$(n).html("0"))}}var c={};c=o.jsonSaveExtend({refresh:0,mainIcon:"fa-bell",mainIconColor:"white",mainIconBackgroundColor:"rgba(70,70,70,0.9)",mainIconBlinking:!1,counterBackgroundColor:"rgb(232, 55, 55 )",counterFontColor:"white",linkTargetBlank:!0},r);var d=function(){var o=$("<li></li>");o.addClass("t-NavigationBar-item");var a=$("<div></div>");return o.append(a),$(".t-NavigationBar").prepend(o),a}();l(s),c.refresh>0&&setInterval(function(){0==d.children("span").length&&(e?l(i):i(dataJSON))},1e3*c.refresh)}}}();